terminationGracePeriodSeconds: 3
ark:
  model:
    enabled: true
    name: test-model-query-overrides
    labels:
      environment: test
      query-override-target: "true"
  mcp:
    enabled: true
    name: mock-llm
    labels:
      environment: test
      mcp-query-override-target: "true"

config:
  rules:
  - path: "/v1/models"
    method: "GET"
    response:
      status: 200
      content: |
        {
          "object": "list",
          "data": [
            {
              "id": "gpt-4",
              "object": "model",
              "created": 1687882411,
              "owned_by": "openai"
            },
            {
              "id": "gpt-4o-mini",
              "object": "model",
              "created": 1687882411,
              "owned_by": "openai"
            },
            {
              "id": "gpt-4.1",
              "object": "model",
              "created": 1687882411,
              "owned_by": "openai"
            },
            {
              "id": "gpt-5",
              "object": "model",
              "created": 1687882411,
              "owned_by": "openai"
            }
          ]
        }

  - path: "/v1/chat/completions"
    match: "@"
    response:
      status: 200
      content: |
        {
          "id": "mock-{{timestamp}}",
          "object": "chat.completion",
          "model": "{{jmes request body.model}}",
          "choices": [{
            "message": {
              "role": "assistant",
              "content": {{jmes request headers}}
            },
            "finish_reason": "stop"
          }]
        }

  - path: "/v1/chat/completions"
    match: "body.messages[-1].content == 'echo-headers'"
    response:
      status: 200
      content: |
        {
          "id": "mock-{{timestamp}}",
          "object": "chat.completion",
          "model": "{{jmes request body.model}}",
          "choices": [{
            "message": {
              "role": "assistant",
              "tool_calls": [{
                "id": "call_{{timestamp}}",
                "type": "function",
                "function": {
                  "name": "mock-llm-mcp-echo-headers",
                  "arguments": "{}"
                }
              }]
            },
            "finish_reason": "tool_calls"
          }]
        }

  - path: "/v1/chat/completions"
    match: "body.messages[-1].role == 'tool'"
    response:
      status: 200
      content: |
        {
          "id": "mock-{{timestamp}}",
          "object": "chat.completion",
          "model": "{{jmes request body.model}}",
          "choices": [{
            "message": {
              "role": "assistant",
              "content": {{jmes request body.messages[-1].content}}
            },
            "finish_reason": "stop"
          }]
        }
